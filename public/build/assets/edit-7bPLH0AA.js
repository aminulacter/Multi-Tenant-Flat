import{d as O,q as B,r as g,y as w,p as E,z,j as d,b as F,e as t,u as v,h as P,A as q,g as H,k as m,i,v as u,n as b,t as p,x as V,F as y,s as N,m as M,o as r}from"./app-C1gjP-sn.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"min-h-screen bg-gray-50 py-12"},A={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},D={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 text-gray-900"},L={class:"space-y-4"},Z={key:0,class:"mt-1 text-sm text-red-600"},$={key:0,class:"mt-1 text-sm text-red-600"},U={key:0,class:"mt-1 text-sm text-red-600"},G={key:0},J=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},Q={key:0,class:"space-y-4 border-t pt-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"md:col-span-2"},Y={key:1,class:"space-y-4 border-t pt-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={class:"md:col-span-2"},te=["value"],se={class:"md:col-span-2"},ae={class:"flex items-center justify-end space-x-3 pt-6 border-t"},ne=["disabled"],le={key:0},de={key:1},re=O({__name:"edit",setup(ie){const c=B(),s=c.props.user,_=c.props.roles||[],C=c.props.houseOwners||[],o=g({name:"",email:"",password:"",password_confirmation:"",role_id:null,house_owner:{name:"",email:"",address:"",city:"",zip:""},tenant:{name:"",email:"",address:"",city:"",zip:"",house_owner_id:null}}),l=g({}),f=g(!1),x=w(()=>_.find(n=>n.id==o.value.role_id)),h=w(()=>x.value?.name==="House Owner"),k=w(()=>x.value?.name==="Tenant");E(()=>{console.log("user",s),o.value.name=s.name||"",o.value.email=s.email||"",o.value.role_id=s.role_id||null,s.house_owner&&(o.value.house_owner={name:s.house_owner.name||"",email:s.house_owner.email||"",address:s.house_owner.address||"",city:s.house_owner.city||"",zip:s.house_owner.zip||""}),s.tenant&&(o.value.tenant={name:s.tenant.name||"",email:s.tenant.email||"",address:s.tenant.address||"",city:s.tenant.city||"",zip:s.tenant.zip||"",house_owner_id:s.tenant.house_owner_id?Number(s.tenant.house_owner_id):null}),console.log("form",o.value),console.log("form.tenant",o.value.tenant),console.log("user.tenant",s.tenant)}),z(()=>s,n=>{n&&(o.value.name=n.name||"",o.value.email=n.email||"",o.value.role_id=n.role_id||null,n.house_owner&&(o.value.house_owner={name:n.house_owner.name||"",email:n.house_owner.email||"",address:n.house_owner.address||"",city:n.house_owner.city||"",zip:n.house_owner.zip||""}),n.tenant&&(o.value.tenant={name:n.tenant.name||"",email:n.tenant.email||"",address:n.tenant.address||"",city:n.tenant.city||"",zip:n.tenant.zip||"",house_owner_id:n.tenant.house_owner_id?Number(n.tenant.house_owner_id):null}))},{immediate:!0,deep:!0}),z(()=>o.value.role_id,(n,e)=>{n!==e&&(o.value.house_owner={name:"",email:"",address:"",city:"",zip:""},o.value.tenant={name:"",email:"",address:"",city:"",zip:"",house_owner_id:null})});const S=async()=>{f.value=!0,l.value={};try{const n={name:o.value.name,email:o.value.email,role_id:o.value.role_id};o.value.password&&(n.password=o.value.password,n.password_confirmation=o.value.password_confirmation),h.value?n.house_owner={name:o.value.name,email:o.value.email,address:o.value.house_owner.address,city:o.value.house_owner.city,zip:o.value.house_owner.zip}:k.value&&(n.tenant={name:o.value.name,email:o.value.email,address:o.value.tenant.address,city:o.value.tenant.city,zip:o.value.tenant.zip,house_owner_id:o.value.tenant.house_owner_id}),await M.put(`/users/${s.id}`,n,{onError:e=>{l.value=e},onSuccess:()=>{}})}catch(n){console.error("Form submission error:",n)}finally{f.value=!1}},I=()=>{o.value={name:s.name||"",email:s.email||"",password:"",password_confirmation:"",role_id:s.role_id||null,house_owner:{name:s.house_owner?.name||"",email:s.house_owner?.email||"",address:s.house_owner?.address||"",city:s.house_owner?.city||"",zip:s.house_owner?.zip||""},tenant:{name:s.tenant?.name||"",email:s.tenant?.email||"",address:s.tenant?.address||"",city:s.tenant?.city||"",zip:s.tenant?.zip||"",house_owner_id:s.tenant?.house_owner_id?Number(s.tenant.house_owner_id):null}},l.value={}};return(n,e)=>(r(),d(y,null,[F(v(P),{title:`Edit User - ${v(s).name}`},null,8,["title"]),t("div",j,[t("div",A,[t("div",D,[t("div",R,[e[31]||(e[31]=q('<div class="mb-6" data-v-bd59a8fb><div class="flex justify-between items-center px-4 py-2" data-v-bd59a8fb><h2 class="text-2xl font-bold text-gray-900" data-v-bd59a8fb>Edit User</h2><a class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md transition-colors" href="/users" data-v-bd59a8fb>Back</a></div><p class="mt-1 text-sm text-gray-600" data-v-bd59a8fb>Update the user information below.</p></div>',1)),t("form",{onSubmit:H(S,["prevent"]),class:"space-y-6"},[t("div",L,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900"},"Basic Information",-1)),t("div",null,[e[12]||(e[12]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name *",-1)),i(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),type:"text",required:"",class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":l.value.name}])},null,2),[[u,o.value.name]]),l.value.name?(r(),d("p",Z,p(l.value.name),1)):m("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email *",-1)),i(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.email=a),type:"email",required:"",class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":l.value.email}])},null,2),[[u,o.value.email]]),l.value.email?(r(),d("p",$,p(l.value.email),1)):m("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"New Password",-1)),i(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.password=a),type:"password",class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":l.value.password}]),placeholder:"Leave blank to keep current password"},null,2),[[u,o.value.password]]),l.value.password?(r(),d("p",U,p(l.value.password),1)):m("",!0)]),o.value.password?(r(),d("div",G,[e[15]||(e[15]=t("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"},"Confirm New Password",-1)),i(t("input",{id:"password_confirmation","onUpdate:modelValue":e[3]||(e[3]=a=>o.value.password_confirmation=a),type:"password",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.password_confirmation]])])):m("",!0),t("div",null,[e[17]||(e[17]=t("label",{for:"role_id",class:"block text-sm font-medium text-gray-700"},"Role *",-1)),i(t("select",{id:"role_id","onUpdate:modelValue":e[4]||(e[4]=a=>o.value.role_id=a),required:"",class:b(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":l.value.role_id}])},[e[16]||(e[16]=t("option",{value:""},"Select a role",-1)),(r(!0),d(y,null,N(v(_),a=>(r(),d("option",{key:a.id,value:a.id},p(a.name),9,J))),128))],2),[[V,o.value.role_id]]),l.value.role_id?(r(),d("p",K,p(l.value.role_id),1)):m("",!0)])]),h.value?(r(),d("div",Q,[e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900"},"House Owner Information",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-gray-600"},"Name and email will be taken from the basic information above.",-1)),t("div",W,[t("div",X,[e[19]||(e[19]=t("label",{for:"house_owner_address",class:"block text-sm font-medium text-gray-700"},"Address",-1)),i(t("input",{id:"house_owner_address","onUpdate:modelValue":e[5]||(e[5]=a=>o.value.house_owner.address=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.house_owner.address]])]),t("div",null,[e[20]||(e[20]=t("label",{for:"house_owner_city",class:"block text-sm font-medium text-gray-700"},"City",-1)),i(t("input",{id:"house_owner_city","onUpdate:modelValue":e[6]||(e[6]=a=>o.value.house_owner.city=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.house_owner.city]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"house_owner_zip",class:"block text-sm font-medium text-gray-700"},"ZIP Code",-1)),i(t("input",{id:"house_owner_zip","onUpdate:modelValue":e[7]||(e[7]=a=>o.value.house_owner.zip=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.house_owner.zip]])])])])):m("",!0),k.value?(r(),d("div",Y,[e[29]||(e[29]=t("h3",{class:"text-lg font-medium text-gray-900"},"Tenant Information",-1)),e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Name and email will be taken from the basic information above.",-1)),t("div",ee,[t("div",oe,[e[25]||(e[25]=t("label",{for:"tenant_house_owner",class:"block text-sm font-medium text-gray-700"},"House Owner",-1)),i(t("select",{id:"tenant_house_owner","onUpdate:modelValue":e[8]||(e[8]=a=>o.value.tenant.house_owner_id=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[e[24]||(e[24]=t("option",{value:""},"Select a house owner (optional)",-1)),(r(!0),d(y,null,N(v(C),a=>(r(),d("option",{key:a.id,value:a.id},p(a.name||a.user.name),9,te))),128))],512),[[V,o.value.tenant.house_owner_id]])]),t("div",se,[e[26]||(e[26]=t("label",{for:"tenant_address",class:"block text-sm font-medium text-gray-700"},"Address",-1)),i(t("input",{id:"tenant_address","onUpdate:modelValue":e[9]||(e[9]=a=>o.value.tenant.address=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.tenant.address]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"tenant_city",class:"block text-sm font-medium text-gray-700"},"City",-1)),i(t("input",{id:"tenant_city","onUpdate:modelValue":e[10]||(e[10]=a=>o.value.tenant.city=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.tenant.city]])]),t("div",null,[e[28]||(e[28]=t("label",{for:"tenant_zip",class:"block text-sm font-medium text-gray-700"},"ZIP Code",-1)),i(t("input",{id:"tenant_zip","onUpdate:modelValue":e[11]||(e[11]=a=>o.value.tenant.zip=a),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[u,o.value.tenant.zip]])])])])):m("",!0),t("div",ae,[t("button",{type:"button",onClick:I,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Reset "),t("button",{type:"submit",disabled:f.value,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(r(),d("span",le,"Updating...")):(r(),d("span",de,"Update User"))],8,ne)])],32)])])])])],64))}}),pe=T(re,[["__scopeId","data-v-bd59a8fb"]]);export{pe as default};
