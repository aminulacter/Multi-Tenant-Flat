import{d as j,r as c,a as E,z as D,c as M,w as x,b as y,e as t,u as b,h as U,l as z,f as g,g as L,i as f,j as l,k as v,n as p,v as $,o as i,t as r,F as h,s as w,x as k,m as O}from"./app-C1gjP-sn.js";import{d as F,_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-BxnW7pDE.js";import{d as q}from"./index-DUMdsY2H.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-lqOkEa73.js";import"./useForwardExpose-BdW8TFuC.js";import"./VisuallyHidden-COE-oCfJ.js";import"./RovingFocusGroup-CNXrAHiD.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-DiNYG7n8.js";const A={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900"},K={class:"flex justify-between items-center mb-6"},P={key:0,class:"mt-1 text-sm text-red-600"},Q=["value"],W={key:0,class:"mt-1 text-sm text-red-600"},X=["disabled"],Y={value:""},Z=["value"],I={key:0,class:"mt-1 text-sm text-red-600"},ee={class:"flex items-center justify-end space-x-4"},te=["disabled"],me=j({__name:"create",props:{buildings:{},tenants:{}},setup(_){const C=_,S=[{title:"Dashboard",href:q().url},{title:"Flats",href:F().url},{title:"Create Flat",href:"#"}],u=c(!1),n=c({}),d=c([]),m=c(!1),a=E({name:"",building_id:null,tenant_id:null}),V=()=>{u.value=!0,n.value={};try{O.post("/flats",a,{onSuccess:()=>{},onError:o=>{n.value=o},onFinish:()=>{u.value=!1}})}catch(o){console.error("Form submission error:",o),u.value=!1}},B=async o=>{if(!o){d.value=[];return}m.value=!0;try{const e=C.buildings.find(s=>s.id===o);if(e){const N=await(await fetch(`/getavailabletenants?house_owner_id=${e.house_owner_id}`)).json();d.value=N}}catch(e){console.error("Error fetching tenants:",e),d.value=[]}finally{m.value=!1}};D(()=>a.building_id,o=>{a.tenant_id=null,o?B(o):d.value=[]});const T=()=>{a.name="",a.building_id=null,a.tenant_id=null,d.value=[],n.value={}};return(o,e)=>(i(),M(R,{breadcrumbs:S},{default:x(()=>[y(b(U),{title:"Create Flat"}),t("div",A,[t("div",G,[t("div",H,[t("div",J,[t("div",K,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Create Flat",-1)),y(b(z),{href:b(F)().url,class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md transition-colors"},{default:x(()=>[...e[3]||(e[3]=[g(" Back ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:L(V,["prevent"]),class:"space-y-6"},[t("div",null,[e[5]||(e[5]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},[g(" Flat Name "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),type:"text",class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-500":n.value.name}]),placeholder:"Enter flat name"},null,2),[[$,a.name]]),n.value.name?(i(),l("p",P,r(n.value.name),1)):v("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{for:"building_id",class:"block text-sm font-medium text-gray-700"},[g(" Building "),t("span",{class:"text-red-500"},"*")],-1)),f(t("select",{id:"building_id","onUpdate:modelValue":e[1]||(e[1]=s=>a.building_id=s),class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-500":n.value.building_id}])},[e[6]||(e[6]=t("option",{value:""},"Select a building",-1)),(i(!0),l(h,null,w(_.buildings,s=>(i(),l("option",{key:s.id,value:s.id},r(s.name),9,Q))),128))],2),[[k,a.building_id]]),n.value.building_id?(i(),l("p",W,r(n.value.building_id),1)):v("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{for:"tenant_id",class:"block text-sm font-medium text-gray-700"}," Tenant (Optional) ",-1)),f(t("select",{id:"tenant_id","onUpdate:modelValue":e[2]||(e[2]=s=>a.tenant_id=s),class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-500":n.value.tenant_id}]),disabled:!a.building_id||m.value},[t("option",Y,r(a.building_id?m.value?"Loading tenants...":"Select a tenant (optional)":"Select a building first"),1),(i(!0),l(h,null,w(d.value,s=>(i(),l("option",{key:s.id,value:s.id},r(s.name),9,Z))),128))],10,X),[[k,a.tenant_id]]),n.value.tenant_id?(i(),l("p",I,r(n.value.tenant_id),1)):v("",!0)]),t("div",ee,[t("button",{type:"button",onClick:T,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md transition-colors"}," Reset "),t("button",{type:"submit",disabled:u.value,class:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white px-4 py-2 rounded-md transition-colors"},r(u.value?"Creating...":"Create Flat"),9,te)])],32)])])])])]),_:1}))}});export{me as default};
